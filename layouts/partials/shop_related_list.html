{{- $site := .Site }}
{{- $post := .post }}
{{- $related := .related | default false}}
{{- $ref := .ref | default false }}
{{- $ref_id := "" }}
{{- $index := .index }}
{{- if eq (mod $index 2) 0 }}
{{- $ref = true }}
{{- $ref_id = "related1" }}
{{- end }}

<div class="card-item card-item-{{ $index }} col-span-6 md:col-span-3 lg:col-span-2 transition duration-500 ease-ease hover:shadow-lg">
    <div class="card-item__image relative bg-body-primary"> 
        <a class="card-item__link" href="{{ $post.RelPermalink }}">
            {{- if $post.Params.thumbnail }}
            <div class="responsive aspect-w-5 aspect-h-6">
            {{- $include_dict := dict "image" $post.Params.thumbnail "alt_text" .Title "Site" .Site "resized" "224x269 Top webp" "fill" true "lazyload" .Site.Data.theme.lazysizes }}
            {{ partial "functions/get_image.html" $include_dict }}
            </div>
            {{- end }}
        </a>
        {{- if isset $post.Params "badge" }}
        <span
            class="card-item__badge absolute text-sm text-white rounded-sm top-2 left-2 px-2" {{ if $post.Params.badge_color }}style="background-color: {{ $post.Params.badge_color }}"{{ end }}>{{ index $post.Params "badge" }}</span>
        {{- end }}
    </div>
    <div class="card-item__info py-3 px-2">
        <a class="card-item__link" href="{{ $post.RelPermalink }}">
            <h3 class="card-item__title text-sm lg:text-base text-heading font-heading font-medium mb-1">{{ $post.Title }}</h3>
        </a>
        {{- with $post.Params.variants }}{{- range first 1 . }}
        <p class="card-item__price mb-3">
            {{- if .discount }}
            <del class="block lg:inline-block text-heading-secondary text-xs lg:text-base lg:mr-2">Rp {{ lang.NumFmt 0 (add .price .discount) "- , ." }}</del>
            {{- end }}
            {{- if .price }}
            <span class="text-heading-primary text-xs lg:text-sm font-medium">Rp {{ lang.NumFmt 0 .price "- , ." }}</span>
            {{- end }}
        </p>
        {{- end }}
        {{- end }}
    </div>
</div>