{{- $site := .Site }}
{{- $section := .section }}
    {{- $bg := $section.design.background }}
    {{- $style := "" }}

    {{- if $bg.color }}
    {{- $style = printf "background-color: %s;" ($bg.color | default "transparent") }}
    {{- end }}

    {{- if and $bg.gradient_start $bg.gradient_end }}
    {{- $style = printf "%sbackground-image: linear-gradient(%s, %s);" $style $bg.gradient_start $bg.gradient_end }}
    {{- end }}

    {{- if $bg.image }}
    {{- $darken := "" }}
    {{- if $bg.image_darken }}
    {{- $darken = printf "linear-gradient(rgba(0, 0, 0, %s), rgba(0, 0, 0, %s))," (string $bg.image_darken) (string $bg.image_darken) }}
    {{- end }}

    {{- $style = printf "%sbackground-image: %s url('%s');" $style $darken (printf "img/%s" $bg.image | absURL) }}
    {{- with $bg.image_size }}
    {{/* Allow sizes: actual, cover, and contain. */}}
    {{- $style = printf "%sbackground-size: %s;" $style (replace . "actual" "auto") }}
    {{- end }}
    {{- with $bg.image_position }}
    {{/* Allow valid CSS positions including left, center, and right. */}}
    {{- $style = printf "%sbackground-position: %s;" $style . }}
    {{- end }}
    {{- end }}

    {{- with $section.design.spacing.padding }}
    {{- $style_padding := printf "padding: %s;" (delimit . " ") }}
    {{- $style = print $style $style_padding }}
    {{- end }}


{{- with $section.images }}

<div class="banner__image relative overflow-hidden transition-all duration-500 ease-ease before:absolute before:empty-content before:bg-white before:bg-opacity-30 before:bottom-0 before:top-0 before:left-1/2 before:right-1/2 before:opacity-100 before:z-20 after:absolute after:empty-content after:bg-white after:bg-opacity-30 after:bottom-1/2 after:top-1/2 after:left-0 after:right-0 after:opacity-100" {{ if .background_color }}style="background-color: {{ .background_color | safeHTML }}" {{ end }}>
    <a class="banner_link" href="{{ if .url }}{{ .url }}{{ end }}">
        <div class="relative aspect-w-4 aspect-h-3">
        {{ $include_dict := dict "image" .image "alt_text" .alt_text "Site" $.Site "class" "absolute w-full h-full left-0 top-0 object-cover rounded-md" "resized" "674x506 webp" "fill" true }}
        {{ partial "functions/get_image.html" $include_dict }}
        </div>
        <div class="absolute w-full h-full top-0 left-0 flex flex-col justify-center">
            <header class="w-80pr mx-auto">
                {{- if .subtitle }}
                <h4 class="text-secondary text-thin lg:text-thin text-base lg:text-3xl mb-2 lg:mb-3">
                    {{- .subtitle | safeHTML }}
                </h4>
                {{- end }}
                {{- if .title }}
                <h3 class="text-primary text-bold lg:text-bold text-lg lg:text-4xl leading-tight lg:leading-tight mb-2 lg:mb-4">
                    {{- .title | safeHTML }}
                </h3>
                {{- end }}
                {{- if .sale_price }}
                <p class="mb-2">{{ if .reg_price }}<del class="text-secondary font-semibold lg:font-semibold mr-2">{{ .reg_price | safeHTML }}</del>{{ end }}<span class="text-primary text-lg lg:text-3xl">{{ .sale_price | safeHTML }}</span></p>
                {{- end }}
            </header>
        </div>
    </a>
</div>
{{- end }}